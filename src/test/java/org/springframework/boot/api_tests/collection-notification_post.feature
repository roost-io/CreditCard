# ********RoostGPT********

# Test generated by RoostGPT for test CrediCard-Karate using AI Type Claude AI and AI Model claude-3-opus-20240229
# 
# Feature file generated for /collection-notification_post for http method type POST 
# RoostTestHash=c6dc500cd4
# 
# 

# ********RoostGPT********
Feature: Collection Notification API

  Background:
    * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:8080')
    * url urlBase
    * def authToken = karate.properties['AUTH_TOKEN']

  Scenario Outline: Test collection notification endpoint with valid request
    Given path '/collection-notification'
    And request
      """
      {
        delinquencyStatus: '<delinquencyStatus>',
        outstandingBalance: <outstandingBalance>,
        additionalCharges: <additionalCharges>,
        cardLast4: '<cardLast4>'
      }
      """
    And header Authorization = 'Bearer ' + authToken
    When method post
    Then status 200
    And match response == '#string'

    Examples:
      | delinquencyStatus | outstandingBalance | additionalCharges | cardLast4 |
      | active            | 100.50             | 20.00             | 1234      |
      | inactive          | 0.00               | 0.00              | 5678      |

  Scenario: Test collection notification endpoint with missing required fields
    Given path '/collection-notification' 
    And request
      """
      {
        delinquencyStatus: 'active',
        outstandingBalance: 100.50
      }
      """
    And header Authorization = 'Bearer ' + authToken
    When method post 
    Then status 400
    And match response contains 'Missing required fields'

  Scenario: Test collection notification endpoint with invalid card last 4 digits
    Given path '/collection-notification'
    And request 
      """
      {
        delinquencyStatus: 'active',
        outstandingBalance: 100.50,
        additionalCharges: 20.00,
        cardLast4: '123'
      }
      """
    And header Authorization = 'Bearer ' + authToken  
    When method post
    Then status 400
    And match response contains 'Invalid cardLast4 format'
