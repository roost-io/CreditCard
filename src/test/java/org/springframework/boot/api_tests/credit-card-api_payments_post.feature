# ********RoostGPT********

# Test generated by RoostGPT for test CreditCard-Karate using AI Type Claude AI and AI Model claude-3-opus-20240229
# 
# Feature file generated for /credit-card-api/payments_post for http method type POST 
# RoostTestHash=01dba1a8c9
# 
# 

# ********RoostGPT********
Feature: Credit Card Payments API

Background:
    * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:8080')
    * url urlBase
    * def authToken = karate.properties['AUTH_TOKEN']
    * configure headers = { 'Authorization': '#(authToken)' }

Scenario Outline: Successful payment
    Given path '/credit-card-api/payments'
    And request
        """
        {
            "CardNumber": "<cardNumber>",
            "Amount": <amount>
        }
        """
    When method POST
    Then status 200
    And match response.message == 'Payment successful'
    And match response.newBalance == <newBalance>

    Examples:
        | cardNumber | amount | newBalance |
        | 1234567890 | 100.50 | 0    |
        | 9876543210 | 50.75  | 0    |

Scenario: Invalid payment details - Invalid card number format
    Given path '/credit-card-api/payments'
    And request
        """
        {
            "CardNumber": "123456",
            "Amount": 100
        }
        """
    When method POST
    Then status 400
    And match response.error contains 'Invalid payment details'

Scenario: Invalid payment details - Missing card number field
    Given path '/credit-card-api/payments'
    And request
        """
        {
            "Amount": 100
        }
        """
    When method POST
    Then status 400
    And match response.error contains 'Invalid payment details'

    Given path '/credit-card-api/payments'
    And request
        """
        {
            "CardNumber": "1234567890"
        }
        """
    When method POST
    Then status 400
    And match response.error contains 'Invalid payment details'
