# ********RoostGPT********

# Test generated by RoostGPT for test karate-test-plan using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /pet/{petId}/uploadImage_post for http method type POST 
# RoostTestHash=8dac89cb33
# 
# 

# ********RoostGPT********
Feature: Test Upload Image Endpoint

  Background:
    * def urlBase = karate.properties['URL_BASE']
    * url urlBase
    * configure headers = { Authorization: karate.properties['AUTH_TOKEN'] }

  Scenario Outline: Verify successful operation of uploading an image
    Given path 'v2', 'pet', '<petId>', 'uploadImage'
    And method POST
    And multipart field additionalMetadata = '<additionalMetadata>'
    And multipart file file =
      """
      {
        read: '<filePath>',
        filename: '<fileName>',
        contentType: '<fileContentType>'
      }
      """
    When status 200
    Then match response.code == '#number'
    And match response.type == '#string'
    And match response.message == '#string'

    Examples:
      | read('pet_petId_uploadImage_post.csv') |

  Scenario: Validate response schema when petId is invalid
    Given path 'v2', 'pet', 0, 'uploadImage'
    And method POST
    And multipart field additionalMetadata = 'Invalid Metadata'
    And multipart file file =
      """
      {
        read: 'testImage.png',
        filename: 'testImage.png',
        contentType: 'image/png'
      }
      """
    When status 404
    Then match response.code == '#number'
    And match response.type == '#string'
    And match response.message == '#string'

  Scenario: Validate response when no file is provided
    Given path 'v2', 'pet', 12345, 'uploadImage'
    And method POST
    And multipart field additionalMetadata = 'Testing missing file'
    When status 200
    Then match response.code == '#number'
    And match response.type == '#string'
    And match response.message == '#string'
