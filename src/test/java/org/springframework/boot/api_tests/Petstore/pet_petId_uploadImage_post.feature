# ********RoostGPT********

# Test generated by RoostGPT for test karate-test-plan using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /pet/{petId}/uploadImage_post for http method type POST 
# RoostTestHash=8dac89cb33
# 
# 

# ********RoostGPT********
Feature: Upload Pet Image

  Scenario Outline: Upload an image file for a pet
    Given url urlBase
    And path 'v2/pet/<petId>/uploadImage'
    And configure headers = """
      {
        Authorization: karate.properties['AUTH_TOKEN']
      }
    """
    And multipart field additionalMetadata = <additionalMetadata>
    And multipart file file = """
      {
        read: '<filePath>',
        filename: '<fileName>',
        contentType: '<fileContentType>'
      }
    """
    When method POST
    Then status 200
    And match response == """
      {
        code: '#number',
        type: '#string',
        message: '#string'
      }
    """
    Examples:
      | petId | additionalMetadata    | filePath           | fileName           | fileContentType |
      | 123   | 'Extra info here'     | 'test-image.jpg'   | 'test-image.jpg'   | 'image/jpeg'    |
      | 456   | null                  | 'sample-image.png' | 'sample-image.png' | 'image/png'     |

  Scenario: Upload an image file with missing metadata
    Given url urlBase
    And path 'v2/pet/789/uploadImage'
    And configure headers = """
      {
        Authorization: karate.properties['AUTH_TOKEN']
      }
    """
    And multipart file file = """
      {
        read: 'test-image.jpg',
        filename: 'test-image.jpg',
        contentType: 'image/jpeg'
      }
    """
    When method POST
    Then status 200
    And match response == """
      {
        code: '#number',
        type: '#string',
        message: '#string'
      }
    """

  Scenario: Upload an image file with unsupported file format
    Given url urlBase
    And path 'v2/pet/543/uploadImage'
    And configure headers = """
      {
        Authorization: karate.properties['AUTH_TOKEN']
      }
    """
    And multipart file file = """
      {
        read: 'invalid-file.txt',
        filename: 'invalid-file.txt',
        contentType: 'text/plain'
      }
    """
    When method POST
    Then status 400
    And match response == """
      {
        code: '#number',
        type: '#string',
        message: '#string'
      }
    """

  Scenario: Missing Authorization while uploading an image file
    Given url urlBase
    And path 'v2/pet/456/uploadImage'
    And multipart field additionalMetadata = 'Info without auth'
    And multipart file file = """
      {
        read: 'test-image.jpg',
        filename: 'test-image.jpg',
        contentType: 'image/jpeg'
      }
    """
    When method POST
    Then status 401
    And match response == """
      {
        code: '#number',
        type: '#string',
        message: '#string'
      }
    """
